{"ast":null,"code":"var _Constants$manifest, _Constants$manifest$e;\nimport React, { useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { WebView } from 'react-native-webview';\nimport Constants from 'expo-constants';\nimport { logger } from \"../utils/logger\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar API_URL = ((_Constants$manifest = Constants.manifest) == null ? void 0 : (_Constants$manifest$e = _Constants$manifest.extra) == null ? void 0 : _Constants$manifest$e.apiUrl) || 'http://localhost:3000';\nexport var PDFViewer = function PDFViewer(_ref) {\n  var pdfUrl = _ref.pdfUrl,\n    onLoadEnd = _ref.onLoadEnd,\n    onError = _ref.onError;\n  var webViewRef = useRef(null);\n  useEffect(function () {\n    logger.info('PDFViewer initialized', {\n      pdfUrl: pdfUrl\n    });\n  }, [pdfUrl]);\n  var handleLoadEnd = function handleLoadEnd() {\n    logger.info('PDF loaded successfully');\n    onLoadEnd == null ? void 0 : onLoadEnd();\n  };\n  var handleError = function handleError(syntheticEvent) {\n    var nativeEvent = syntheticEvent.nativeEvent;\n    logger.error('PDF loading error', {\n      error: nativeEvent.description,\n      url: pdfUrl\n    });\n    onError == null ? void 0 : onError(nativeEvent);\n  };\n  var pdfViewerUrl = Platform.select({\n    web: pdfUrl,\n    default: `https://docs.google.com/viewer?url=${encodeURIComponent(pdfUrl)}&embedded=true`\n  });\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(WebView, {\n      ref: webViewRef,\n      source: {\n        uri: pdfViewerUrl\n      },\n      style: styles.webview,\n      originWhitelist: ['*'],\n      allowsInlineMediaPlayback: true,\n      mediaPlaybackRequiresUserAction: false,\n      startInLoadingState: true,\n      onLoadEnd: handleLoadEnd,\n      onError: handleError\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: Dimensions.get('window').width,\n    height: Dimensions.get('window').height\n  },\n  webview: {\n    flex: 1\n  }\n});","map":{"version":3,"names":["React","useEffect","useRef","View","StyleSheet","Dimensions","Platform","WebView","Constants","logger","jsx","_jsx","API_URL","_Constants$manifest","manifest","_Constants$manifest$e","extra","apiUrl","PDFViewer","_ref","pdfUrl","onLoadEnd","onError","webViewRef","info","handleLoadEnd","handleError","syntheticEvent","nativeEvent","error","description","url","pdfViewerUrl","select","web","default","encodeURIComponent","style","styles","container","children","ref","source","uri","webview","originWhitelist","allowsInlineMediaPlayback","mediaPlaybackRequiresUserAction","startInLoadingState","create","flex","width","get","height"],"sources":["/Users/cassioreistrindade/kbc2/frontend/src/components/PDFViewer.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { View, StyleSheet, Dimensions, Platform } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport Constants from 'expo-constants';\nimport { logger } from '../utils/logger';\n\nconst API_URL = Constants.manifest?.extra?.apiUrl || 'http://localhost:3000';\n\ninterface PDFViewerProps {\n  pdfUrl: string;\n  onLoadEnd?: () => void;\n  onError?: (error: any) => void;\n}\n\nexport const PDFViewer: React.FC<PDFViewerProps> = ({ \n  pdfUrl, \n  onLoadEnd, \n  onError \n}) => {\n  const webViewRef = useRef<WebView>(null);\n\n  useEffect(() => {\n    logger.info('PDFViewer initialized', { pdfUrl });\n  }, [pdfUrl]);\n\n  const handleLoadEnd = () => {\n    logger.info('PDF loaded successfully');\n    onLoadEnd?.();\n  };\n\n  const handleError = (syntheticEvent: any) => {\n    const { nativeEvent } = syntheticEvent;\n    logger.error('PDF loading error', { \n      error: nativeEvent.description,\n      url: pdfUrl \n    });\n    onError?.(nativeEvent);\n  };\n\n  // URL para renderizar PDF no navegador\n  const pdfViewerUrl = Platform.select({\n    web: pdfUrl,\n    default: `https://docs.google.com/viewer?url=${encodeURIComponent(pdfUrl)}&embedded=true`\n  });\n\n  return (\n    <View style={styles.container}>\n      <WebView\n        ref={webViewRef}\n        source={{ uri: pdfViewerUrl }}\n        style={styles.webview}\n        originWhitelist={['*']}\n        allowsInlineMediaPlayback\n        mediaPlaybackRequiresUserAction={false}\n        startInLoadingState\n        onLoadEnd={handleLoadEnd}\n        onError={handleError}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: Dimensions.get('window').width,\n    height: Dimensions.get('window').height,\n  },\n  webview: {\n    flex: 1,\n  },\n});"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,QAAA;AAEjD,SAASC,OAAO,QAAQ,sBAAsB;AAC9C,OAAOC,SAAS,MAAM,gBAAgB;AACtC,SAASC,MAAM;AAA0B,SAAAC,GAAA,IAAAC,IAAA;AAEzC,IAAMC,OAAO,GAAG,EAAAC,mBAAA,GAAAL,SAAS,CAACM,QAAQ,sBAAAC,qBAAA,GAAlBF,mBAAA,CAAoBG,KAAK,qBAAzBD,qBAAA,CAA2BE,MAAM,KAAI,uBAAuB;AAQ5E,OAAO,IAAMC,SAAmC,GAAG,SAAtCA,SAAmCA,CAAAC,IAAA,EAI1C;EAAA,IAHJC,MAAM,GAAAD,IAAA,CAANC,MAAM;IACNC,SAAS,GAAAF,IAAA,CAATE,SAAS;IACTC,OAAO,GAAAH,IAAA,CAAPG,OAAO;EAEP,IAAMC,UAAU,GAAGrB,MAAM,CAAU,IAAI,CAAC;EAExCD,SAAS,CAAC,YAAM;IACdQ,MAAM,CAACe,IAAI,CAAC,uBAAuB,EAAE;MAAEJ,MAAM,EAANA;IAAO,CAAC,CAAC;EAClD,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,IAAMK,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IAC1BhB,MAAM,CAACe,IAAI,CAAC,yBAAyB,CAAC;IACtCH,SAAS,oBAATA,SAAS,CAAG,CAAC;EACf,CAAC;EAED,IAAMK,WAAW,GAAG,SAAdA,WAAWA,CAAIC,cAAmB,EAAK;IAC3C,IAAQC,WAAW,GAAKD,cAAc,CAA9BC,WAAW;IACnBnB,MAAM,CAACoB,KAAK,CAAC,mBAAmB,EAAE;MAChCA,KAAK,EAAED,WAAW,CAACE,WAAW;MAC9BC,GAAG,EAAEX;IACP,CAAC,CAAC;IACFE,OAAO,oBAAPA,OAAO,CAAGM,WAAW,CAAC;EACxB,CAAC;EAGD,IAAMI,YAAY,GAAG1B,QAAQ,CAAC2B,MAAM,CAAC;IACnCC,GAAG,EAAEd,MAAM;IACXe,OAAO,EAAE,sCAAsCC,kBAAkB,CAAChB,MAAM,CAAC;EAC3E,CAAC,CAAC;EAEF,OACET,IAAA,CAACR,IAAI;IAACkC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC5B7B,IAAA,CAACJ,OAAO;MACNkC,GAAG,EAAElB,UAAW;MAChBmB,MAAM,EAAE;QAAEC,GAAG,EAAEX;MAAa,CAAE;MAC9BK,KAAK,EAAEC,MAAM,CAACM,OAAQ;MACtBC,eAAe,EAAE,CAAC,GAAG,CAAE;MACvBC,yBAAyB;MACzBC,+BAA+B,EAAE,KAAM;MACvCC,mBAAmB;MACnB3B,SAAS,EAAEI,aAAc;MACzBH,OAAO,EAAEI;IAAY,CACtB;EAAC,CACE,CAAC;AAEX,CAAC;AAED,IAAMY,MAAM,GAAGlC,UAAU,CAAC6C,MAAM,CAAC;EAC/BV,SAAS,EAAE;IACTW,IAAI,EAAE,CAAC;IACPC,KAAK,EAAE9C,UAAU,CAAC+C,GAAG,CAAC,QAAQ,CAAC,CAACD,KAAK;IACrCE,MAAM,EAAEhD,UAAU,CAAC+C,GAAG,CAAC,QAAQ,CAAC,CAACC;EACnC,CAAC;EACDT,OAAO,EAAE;IACPM,IAAI,EAAE;EACR;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}