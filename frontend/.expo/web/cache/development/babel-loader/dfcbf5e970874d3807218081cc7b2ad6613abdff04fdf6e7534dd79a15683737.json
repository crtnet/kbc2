{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useRoute } from '@react-navigation/native';\nimport PDFViewer from \"../components/PDFViewer\";\nimport { getBook } from \"../services/api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var ViewBookPDFScreen = function ViewBookPDFScreen() {\n  var route = useRoute();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    book = _useState2[0],\n    setBook = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  useEffect(function () {\n    var loadBook = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var bookData = yield getBook(route.params.bookId);\n          setBook(bookData);\n        } catch (err) {\n          setError(err.message);\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function loadBook() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    loadBook();\n  }, [route.params.bookId]);\n  if (loading) {\n    return _jsx(View, {\n      style: styles.centered,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\"\n      })\n    });\n  }\n  if (error || !book) {\n    return _jsx(View, {\n      style: styles.centered,\n      children: _jsx(Text, {\n        style: styles.error,\n        children: error || 'Não foi possível carregar o livro'\n      })\n    });\n  }\n  if (!book.pdfUrl) {\n    return _jsx(View, {\n      style: styles.centered,\n      children: _jsx(Text, {\n        style: styles.error,\n        children: \"PDF ainda n\\xE3o foi gerado para este livro\"\n      })\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(PDFViewer, {\n      pdfUrl: book.pdfUrl\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  error: {\n    color: 'red',\n    textAlign: 'center',\n    margin: 20\n  }\n});\nexport default ViewBookPDFScreen;","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","ActivityIndicator","useRoute","PDFViewer","getBook","jsx","_jsx","ViewBookPDFScreen","route","_useState","_useState2","_slicedToArray","book","setBook","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","loadBook","_ref","_asyncToGenerator","bookData","params","bookId","err","message","apply","arguments","style","styles","centered","children","size","Text","pdfUrl","container","create","flex","justifyContent","alignItems","color","textAlign","margin"],"sources":["/Users/cassioreistrindade/kbc2/frontend/src/screens/ViewBookPDFScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet, ActivityIndicator } from 'react-native';\nimport { useRoute, RouteProp } from '@react-navigation/native';\nimport PDFViewer from '../components/PDFViewer';\nimport { getBook } from '../services/api';\nimport { Book } from '../types';\n\ntype RouteParams = {\n  ViewBookPDF: {\n    bookId: string;\n  };\n};\n\nexport const ViewBookPDFScreen: React.FC = () => {\n  const route = useRoute<RouteProp<RouteParams, 'ViewBookPDF'>>();\n  const [book, setBook] = useState<Book | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadBook = async () => {\n      try {\n        const bookData = await getBook(route.params.bookId);\n        setBook(bookData);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadBook();\n  }, [route.params.bookId]);\n\n  if (loading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" />\n      </View>\n    );\n  }\n\n  if (error || !book) {\n    return (\n      <View style={styles.centered}>\n        <Text style={styles.error}>\n          {error || 'Não foi possível carregar o livro'}\n        </Text>\n      </View>\n    );\n  }\n\n  if (!book.pdfUrl) {\n    return (\n      <View style={styles.centered}>\n        <Text style={styles.error}>\n          PDF ainda não foi gerado para este livro\n        </Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <PDFViewer pdfUrl={book.pdfUrl} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  error: {\n    color: 'red',\n    textAlign: 'center',\n    margin: 20,\n  },\n});\n\nexport default ViewBookPDFScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}